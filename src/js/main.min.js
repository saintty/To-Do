function createCheckButton(t){t.addEventListener("click",(()=>{t.parentNode.classList.toggle("task_complete"),saveTasksInLocalStorage()}))}function createDeleteButton(t){t.addEventListener("click",(()=>{t.parentNode.remove(),saveTasksInLocalStorage()}))}function createTask(t,e=!1){const s=document.createElement("li");s.classList.add("todo__item","task"),e&&s.classList.add("task_complete");const a=document.createElement("button");a.classList.add("task__status","task__button"),createCheckButton(a);const n=document.createElement("img");n.classList.add("task__status-img"),n.setAttribute("src","images/check-mark.svg"),n.setAttribute("alt","Галочка завершенной задачи"),a.appendChild(n);const o=document.createElement("p");o.classList.add("task__message"),o.addEventListener("dblclick",(function(){this.contentEditable=!0,this.focus()})),o.addEventListener("blur",(function(){this.contentEditable=!1})),o.innerText=t;const c=document.createElement("button");c.classList.add("task__delete-button","task__button"),createDeleteButton(c);const l=document.createElement("img");return l.classList.add("task__delete-img"),l.setAttribute("src","images/delete.svg"),l.setAttribute("alt","Крест кнопки удаления"),c.appendChild(l),s.appendChild(a),s.appendChild(o),s.appendChild(c),s}function saveTasksInLocalStorage(){const t=[];[...document.getElementsByClassName("task")].forEach((e=>{const s=e.querySelector(".task__message").innerText,a=e.classList.contains("task_complete");t.push([s,a])})),localStorage.setItem("todo list tasks",JSON.stringify(t))}function loadTasksFromLocalStorage(t){let e=localStorage.getItem("todo list tasks");e&&(e=JSON.parse(e),e.forEach((e=>{const s=e[0],a=e[1];t.appendChild(createTask(s,a))})))}function showTaskByType(t,e){for(let s of t.children)"active"===e&&s.classList.contains("task_complete")?s.style.display="none":"finished"!==e||s.classList.contains("task_complete")?s.style.display=null:s.style.display="none"}function init(){const t=document.getElementById("form"),e=document.getElementById("input"),s=document.getElementById("todo__list");loadTasksFromLocalStorage(s),t.addEventListener("submit",(t=>{t.preventDefault(),""!==e.value&&(s.appendChild(createTask(e.value)),e.value="",saveTasksInLocalStorage())}));document.getElementById("todo__button_all").addEventListener("click",(()=>{showTaskByType(s,"all")}));document.getElementById("todo__button_active").addEventListener("click",(()=>{showTaskByType(s,"active")}));document.getElementById("todo__button_finished").addEventListener("click",(()=>{showTaskByType(s,"finished")}))}window.onload=init;